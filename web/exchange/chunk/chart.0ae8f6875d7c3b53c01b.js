(window.webpackJsonp=window.webpackJsonp||[]).push([[6,12,16,17],{114:function(e,t,r){"use strict";(function(e,n){var a=r(42),i=r(106),o=r(22),u=r(41),c=r(27);o(t,"__esModule",{value:!0}),t.default=void 0;var s=c(r(145)),l=c(r(154)),d=c(r(274)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=w(t);if(r&&r.has(e))return r.get(e);var n={},i=o&&u;for(var c in e)if("default"!==c&&Object.prototype.hasOwnProperty.call(e,c)){var s=i?u(e,c):null;s&&(s.get||s.set)?o(n,c,s):n[c]=e[c]}n.default=e,r&&r.set(e,n);return n}(r(0)),p=r(252),v=r(253),h=r(753),m=r(251);function w(e){if("function"!=typeof i)return null;var t=new i,r=new i;return(w=function(e){return e?r:t})(e)}var g=r(713),b=null,y=[],S=function(t){var r=(0,h.useObserver)(m.instrumentStore),a=r.currentInstrumentId,i=r.currentInterval,o=(0,h.useObserver)(m.jsbridgeStore).jsbridgeStatus,u=(0,f.useRef)(null);(0,f.useEffect)((function(){o&&(window.flutter_inappwebview.callHandler("getCandleStick",(function(e){window.webApp.kDataArray=e.kLine,window.webApp.middlePriceArray=e.middlePrice})),window.webApp.changeInstrument=function(e){m.instrumentStore.changeInstrumentId(e.instrumentId),m.instrumentStore.changeInterval(e.interval)}),e.loadScript("".concat(n.widget.library_path,"charting_library.standalone.js"),(function(){c()}),(function(){console.log("load tradingview error")}))}),[o]),(0,f.useEffect)((function(){b&&(b.chart().setSymbol(a),b.chart().setResolution(i),b.chart().setChartType(1))}),[a,i]);var c=function(){b&&b.remove(),window.webApp.kDataArray=g,window.webApp.middlePriceArray=g;var e=(0,d.default)(n.widget,{symbol:a||"BTC/USDT",interval:i||"15",datafeed:new v.UDFCompatibleDatafeed(""),container:"tv_chart_container"});(b=new TradingView.widget(e)).onChartReady((function(){w()}))},w=function(){y&&y.length>0&&((0,s.default)(y).call(y,(function(e){b.chart().removeEntity(e)})),y=[]);var e=n.ma.time;(0,l.default)(e).call(e,(function(e,t){b.chart().createStudy("Moving Average",!1,!1,{length:e},{"plot.color.0":n.ma.colors[t],"plot.linewidth":1,precision:2}).then((function(e){y.push(e)}))}));var t=window.webApp.middlePriceArray;t&&t.length>0&&b.chart().createStudy("Compare",!1,!1,["open","Market Middle Price"],{"plot.color.0":n.compare.color}).then((function(e){var t="".concat(n.symbol.priceScale,",1,false");b.applyOverrides({"mainSeriesProperties.priceAxisProperties.percentage":!1,"mainSeriesProperties.priceAxisProperties.autoScale":!1,"mainSeriesProperties.priceAxisProperties.indexedTo100":!1,"mainSeriesProperties.priceAxisProperties.log":!1,"mainSeriesProperties.minTick":t,"scalesProperties.showSymbolLabels":!1}),b.applyStudiesOverrides({"compare.precision":2,"compare.minTick":t}),b.chart().getPanes()[0].getRightPriceScales()[0].setMode(0),b.chart().getStudyById(e).changePriceScale("as-series"),b.chart().getStudyById(e).applyOverrides({precision:2,minTick:t}),y.push(e)}))};return f.default.createElement(p.WrapperIndexCmp,null,f.default.createElement("div",{ref:u,id:"tv_chart_container"}))};t.default=S}).call(this,r(157).default,r(795).default)},242:function(e,t,r){"use strict";var n=r(22),a=r(27);n(t,"__esModule",{value:!0}),t.QuotesProvider=void 0;var i=a(r(726)),o=a(r(60)),u=a(r(61)),c=r(237),s=function(){function e(t,r){(0,o.default)(this,e),this._datafeedUrl=t,this._requester=r}return(0,u.default)(e,[{key:"getQuotes",value:function(e){var t=this;return new i.default((function(r,n){t._requester.sendRequest(t._datafeedUrl,"quotes",{symbols:e}).then((function(e){"ok"===e.s?r(e.d):n(e.errmsg)})).catch((function(e){var t=(0,c.getErrorMessage)(e);(0,c.logMessage)("QuotesProvider: getQuotes failed, error=".concat(t)),n("network error: ".concat(t))}))}))}}]),e}();t.QuotesProvider=s},243:function(e,t,r){"use strict";var n=r(22),a=r(27);n(t,"__esModule",{value:!0}),t.Requester=void 0;var i=a(r(148)),o=a(r(145)),u=a(r(144)),c=a(r(60)),s=a(r(61)),l=r(237),d=function(){function e(t){(0,c.default)(this,e),t&&(this._headers=t)}return(0,s.default)(e,[{key:"sendRequest",value:function(e,t,r){var n;if(void 0!==r){var a=(0,i.default)(r);0!==a.length&&(t+="?"),t+=(0,o.default)(a).call(a,(function(e){var t;return(0,u.default)(t="".concat(encodeURIComponent(e),"=")).call(t,encodeURIComponent(r[e].toString()))})).join("&")}(0,l.logMessage)("New request: "+t);var c={credentials:"same-origin"};return void 0!==this._headers&&(c.headers=this._headers),fetch((0,u.default)(n="".concat(e,"/")).call(n,t),c).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)}))}}]),e}();t.Requester=d},252:function(e,t,r){"use strict";var n=r(22),a=r(27);n(t,"__esModule",{value:!0}),t.WrapperIndexCmp=void 0;var i,o=a(r(240)),u=a(r(241)).default.div(i||(i=(0,o.default)(["\n    #tv_chart_container {\n        display: block;\n        box-sizing: border-box;\n        margin: 0;\n        min-width: 0;\n        height: 100%;\n    }\n"])));t.WrapperIndexCmp=u},253:function(e,t,r){"use strict";var n=r(264),a=r(22),i=r(27);a(t,"__esModule",{value:!0}),t.UDFCompatibleDatafeed=void 0;var o=i(r(61)),u=i(r(60)),c=i(r(265)),s=i(r(266)),l=i(r(267)),d=r(254),f=r(242),p=r(243);function v(e){var t=function(){if("undefined"==typeof Reflect||!n)return!1;if(n.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(n(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;r=n(a,arguments,i)}else r=a.apply(this,arguments);return(0,s.default)(this,r)}}var h=function(e){(0,c.default)(r,e);var t=v(r);function r(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4,a=arguments.length>2?arguments[2]:void 0;(0,u.default)(this,r);var i=new p.Requester,o=new f.QuotesProvider(e,i);return t.call(this,e,o,i,n,a)}return(0,o.default)(r)}(d.UDFCompatibleDatafeedBase);t.UDFCompatibleDatafeed=h},753:function(e,t,r){"use strict";r.r(t),r.d(t,"useObserver",(function(){return i}));var n=r(19),a=r(0);function i(e){let t,r;if("function"==typeof e)r=e,t=e();else{if(!Object(n.isObservable)(e))return console.warn("args is not a mobx object or a reaction function"),e;t=e,r=()=>Object(n.toJS)(t)}const[i,o]=Object(a.useState)(Object(n.toJS)(t)),u=Object(n.reaction)(r,e=>{o(e)});return Object(a.useEffect)(()=>()=>{u()},[]),i}}}]);