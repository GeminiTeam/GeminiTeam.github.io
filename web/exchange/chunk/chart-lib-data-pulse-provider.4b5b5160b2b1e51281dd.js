(window.webpackJsonp=window.webpackJsonp||[]).push([[9,10],{237:function(e,t,r){"use strict";var n=r(24),s=r(29);n(t,"__esModule",{value:!0}),t.getErrorMessage=function(e){if(void 0===e)return"";if("string"==typeof e)return e;return e.message},t.logMessage=function(e){if(i){var t,r,n=new Date;console.log((0,a.default)(t=(0,a.default)(r="".concat(n.toLocaleTimeString(),".")).call(r,n.getMilliseconds(),"> ")).call(t,e))}};var a=s(r(144)),i=!1},254:function(e,t,r){"use strict";var n=r(24),s=r(29);n(t,"__esModule",{value:!0}),t.DataPulseProvider=void 0;var a=s(r(728)),i=s(r(715)),o=s(r(144)),u=s(r(734)),c=s(r(748)),l=s(r(72)),f=s(r(73)),d=r(237),v=function(){function e(t,r){var n;(0,l.default)(this,e),this._subscribers={},this._requestsPending=0,this._historyProvider=t,(0,a.default)((0,i.default)(n=this._updateData).call(n,this),r)}return(0,f.default)(e,[{key:"subscribeBars",value:function(e,t,r,n){var s,a;this._subscribers.hasOwnProperty(n)?(0,d.logMessage)("DataPulseProvider: already has subscriber with id=".concat(n)):(this._subscribers[n]={lastBarTime:null,listener:r,resolution:t,symbolInfo:e},(0,d.logMessage)((0,o.default)(s=(0,o.default)(a="DataPulseProvider: subscribed for #".concat(n," - {")).call(a,e.name,", ")).call(s,t,"}")))}},{key:"unsubscribeBars",value:function(e){delete this._subscribers[e],(0,d.logMessage)("DataPulseProvider: unsubscribed for #".concat(e))}},{key:"_updateData",value:function(){var e=this;if(!(this._requestsPending>0)){this._requestsPending=0;var t=function(t){e._requestsPending+=1,e._updateDataForSubscriber(t).then((function(){var r;e._requestsPending-=1,(0,d.logMessage)((0,o.default)(r="DataPulseProvider: data for #".concat(t," updated successfully, pending=")).call(r,e._requestsPending))})).catch((function(r){var n,s;e._requestsPending-=1,(0,d.logMessage)((0,o.default)(n=(0,o.default)(s="DataPulseProvider: data for #".concat(t," updated with error=")).call(s,(0,d.getErrorMessage)(r),", pending=")).call(n,e._requestsPending))}))};for(var r in this._subscribers)t(r)}}},{key:"_updateDataForSubscriber",value:function(e){var t=this,r=this._subscribers[e],n=(0,u.default)(((0,c.default)()/1e3).toString()),s=n-function(e,t){var r=0;r="D"===e||"1D"===e?t:"M"===e||"1M"===e?31*t:"W"===e||"1W"===e?7*t:t*(0,u.default)(e)/1440;return 24*r*60*60}(r.resolution,10);return this._historyProvider.getBars(r.symbolInfo,r.resolution,{from:s,to:n,countBack:2,firstDataRequest:!1}).then((function(r){t._onSubscriberDataReceived(e,r)}))}},{key:"_onSubscriberDataReceived",value:function(e,t){if(this._subscribers.hasOwnProperty(e)){var r=t.bars;if(0!==r.length){var n=r[r.length-1],s=this._subscribers[e];if(!(null!==s.lastBarTime&&n.time<s.lastBarTime)){if(null!==s.lastBarTime&&n.time>s.lastBarTime){if(r.length<2)throw new Error("Not enough bars in history for proper pulse update. Need at least 2.");var a=r[r.length-2];s.listener(a)}s.lastBarTime=n.time,s.listener(n)}}}else(0,d.logMessage)("DataPulseProvider: Data comes for already unsubscribed subscription #".concat(e))}}]),e}();t.DataPulseProvider=v},715:function(e,t,r){e.exports=r(244)},716:function(e,t,r){"use strict";var n,s=r(27),a=r(74),i=r(19),o=r(732),u=r(238),c=r(105),l=r(721),f=s.Function,d=/MSIE .\./.test(u)||o&&((n=s.Bun.version.split(".")).length<3||0==n[0]&&(n[1]<3||3==n[1]&&0==n[2]));e.exports=function(e,t){var r=t?2:1;return d?function(n,s){var o=l(arguments.length,1)>r,u=i(n)?n:f(n),d=o?c(arguments,r):[],v=o?function(){a(u,this,d)}:u;return t?e(v,s):e(v)}:e}},720:function(e,t,r){r(731),r(733)},721:function(e,t){var r=TypeError;e.exports=function(e,t){if(e<t)throw r("Not enough arguments");return e}},722:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},728:function(e,t,r){e.exports=r(746)},731:function(e,t,r){var n=r(7),s=r(27),a=r(716)(s.setInterval,!0);n({global:!0,bind:!0,forced:s.setInterval!==a},{setInterval:a})},732:function(e,t){e.exports="function"==typeof Bun&&Bun&&"string"==typeof Bun.version},733:function(e,t,r){var n=r(7),s=r(27),a=r(716)(s.setTimeout,!0);n({global:!0,bind:!0,forced:s.setTimeout!==a},{setTimeout:a})},734:function(e,t,r){e.exports=r(752)},746:function(e,t,r){r(720);var n=r(17);e.exports=n.setInterval},747:function(e,t,r){var n=r(10),s=r(79),a=r(48),i=r(722),o=n("".replace),u=RegExp("^["+i+"]+"),c=RegExp("(^|[^"+i+"])["+i+"]+$"),l=function(e){return function(t){var r=a(s(t));return 1&e&&(r=o(r,u,"")),2&e&&(r=o(r,c,"$1")),r}};e.exports={start:l(1),end:l(2),trim:l(3)}},748:function(e,t,r){e.exports=r(756)},752:function(e,t,r){var n=r(753);e.exports=n},753:function(e,t,r){r(754);var n=r(17);e.exports=n.parseInt},754:function(e,t,r){var n=r(7),s=r(755);n({global:!0,forced:parseInt!=s},{parseInt:s})},755:function(e,t,r){var n=r(27),s=r(9),a=r(10),i=r(48),o=r(747).trim,u=r(722),c=n.parseInt,l=n.Symbol,f=l&&l.iterator,d=/^[+-]?0x/i,v=a(d.exec),g=8!==c(u+"08")||22!==c(u+"0x16")||f&&!s((function(){c(Object(f))}));e.exports=g?function(e,t){var r=o(i(e));return c(r,t>>>0||(v(d,r)?16:10))}:c},756:function(e,t,r){var n=r(757);e.exports=n},757:function(e,t,r){r(758);var n=r(17);e.exports=n.Date.now},758:function(e,t,r){var n=r(7),s=r(10),a=Date,i=s(a.prototype.getTime);n({target:"Date",stat:!0},{now:function(){return i(new a)}})}}]);