(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{267:function(t,e,r){"use strict";var n=r(250),o=r(789),i=r(790),a=r(739),s=r(757),u=r(18),c=r(23);u(e,"__esModule",{value:!0}),e.SymbolsStorage=void 0;var f=c(r(42)),l=c(r(43)),v=c(r(757)),d=c(r(765)),h=c(r(152)),p=c(r(250)),y=c(r(791)),m=c(r(801)),g=c(r(806)),_=c(r(149)),x=r(246);function b(t,e){var r=void 0!==i&&a(t)||t["@@iterator"];if(!r){if(s(t)||(r=function(t,e){var r;if(!t)return;if("string"==typeof t)return A(t,e);var i=n(r=Object.prototype.toString.call(t)).call(r,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return o(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return A(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var u=0,c=function(){};return{s:c,n:function(){return u>=t.length?{done:!0}:{done:!1,value:t[u++]}},e:function(t){throw t},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,l=!0,v=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return l=t.done,t},e:function(t){v=!0,f=t},f:function(){try{l||null==r.return||r.return()}finally{if(v)throw f}}}}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function w(t,e,r,n){var o=t[e];return!(0,v.default)(o)||n&&!(0,v.default)(o[0])?o:o[r]}function S(t,e,r){return t+(void 0!==e?"_%|#|%_"+e:"")+(void 0!==r?"_%|#|%_"+r:"")}var I=function(){function t(e,r,n){(0,f.default)(this,t),this._exchangesList=["NYSE","FOREX","AMEX"],this._symbolsInfo={},this._symbolsList=[],this._datafeedUrl=e,this._datafeedSupportedResolutions=r,this._requester=n,this._readyPromise=this._init(),this._readyPromise.catch((function(t){console.error("SymbolsStorage: Cannot init, error=".concat(t.toString()))}))}return(0,l.default)(t,[{key:"resolveSymbol",value:function(t,e,r){var n=this;return this._readyPromise.then((function(){var o=n._symbolsInfo[S(t,e,r)];return void 0===o?d.default.reject("invalid symbol"):d.default.resolve(o)}))}},{key:"searchSymbols",value:function(t,e,r,n){var o=this;return this._readyPromise.then((function(){var i,a,s=[],u=0===t.length;t=t.toUpperCase();var c,f=b(o._symbolsList);try{var l=function(){var n,i,a=c.value,f=o._symbolsInfo[a];if(void 0===f)return"continue";if(r.length>0&&f.type!==r)return"continue";if(e&&e.length>0&&f.exchange!==e)return"continue";var l=(0,m.default)(n=f.name.toUpperCase()).call(n,t),v=(0,m.default)(i=f.description.toUpperCase()).call(i,t);if((u||l>=0||v>=0)&&!(0,g.default)(s).call(s,(function(t){return t.symbolInfo===f}))){var d=l>=0?l:8e3+v;s.push({symbolInfo:f,weight:d})}};for(f.s();!(c=f.n()).done;)l()}catch(t){f.e(t)}finally{f.f()}var v=(0,h.default)(i=(0,p.default)(a=(0,y.default)(s).call(s,(function(t,e){return t.weight-e.weight}))).call(a,0,n)).call(i,(function(t){var e=t.symbolInfo;return{symbol:e.name,full_name:e.full_name,description:e.description,exchange:e.exchange,params:[],type:e.type,ticker:e.name}}));return d.default.resolve(v)}))}},{key:"_init",value:function(){var t,e=this,r=[],n={},o=b(this._exchangesList);try{for(o.s();!(t=o.n()).done;){var i=t.value;n[i]||(n[i]=!0,r.push(this._requestExchangeData(i)))}}catch(t){o.e(t)}finally{o.f()}return d.default.all(r).then((function(){var t;(0,y.default)(t=e._symbolsList).call(t),(0,x.logMessage)("SymbolsStorage: All exchanges data loaded")}))}},{key:"_requestExchangeData",value:function(t){var e=this;return new d.default((function(r,n){e._requester.sendRequest(e._datafeedUrl,"symbol_info",{group:t}).then((function(o){try{e._onExchangeDataReceived(t,o)}catch(t){return void n(t instanceof Error?t:new Error("SymbolsStorage: Unexpected exception ".concat(t)))}r()})).catch((function(e){var n;(0,x.logMessage)((0,_.default)(n="SymbolsStorage: Request data for exchange '".concat(t,"' failed, reason=")).call(n,(0,x.getErrorMessage)(e))),r()}))}))}},{key:"_onExchangeDataReceived",value:function(t,e){var r=0;try{for(var n=e.symbol.length,o=void 0!==e.ticker;r<n;++r){var i=e.symbol[r],a=w(e,"exchange-listed",r),s=w(e,"exchange-traded",r),u=s+":"+i,c=w(e,"currency-code",r),f=w(e,"unit-id",r),l=o?w(e,"ticker",r):i,v={ticker:l,name:i,base_name:[a+":"+i],full_name:u,listed_exchange:a,exchange:s,currency_code:c,original_currency_code:w(e,"original-currency-code",r),unit_id:f,original_unit_id:w(e,"original-unit-id",r),unit_conversion_types:w(e,"unit-conversion-types",r,!0),description:w(e,"description",r),has_intraday:k(w(e,"has-intraday",r),!1),has_no_volume:k(w(e,"has-no-volume",r),void 0),visible_plots_set:k(w(e,"visible-plots-set",r),void 0),minmov:w(e,"minmovement",r)||w(e,"minmov",r)||0,minmove2:w(e,"minmove2",r)||w(e,"minmov2",r),fractional:w(e,"fractional",r),pricescale:w(e,"pricescale",r),type:w(e,"type",r),session:w(e,"session-regular",r),session_holidays:w(e,"session-holidays",r),corrections:w(e,"corrections",r),timezone:w(e,"timezone",r),supported_resolutions:k(w(e,"supported-resolutions",r,!0),this._datafeedSupportedResolutions),has_daily:k(w(e,"has-daily",r),!0),intraday_multipliers:k(w(e,"intraday-multipliers",r,!0),["1","5","15","30","60"]),has_weekly_and_monthly:w(e,"has-weekly-and-monthly",r),has_empty_bars:w(e,"has-empty-bars",r),volume_precision:k(w(e,"volume-precision",r),0),format:"price"};this._symbolsInfo[l]=v,this._symbolsInfo[i]=v,this._symbolsInfo[u]=v,void 0===c&&void 0===f||(this._symbolsInfo[S(l,c,f)]=v,this._symbolsInfo[S(i,c,f)]=v,this._symbolsInfo[S(u,c,f)]=v),this._symbolsList.push(i)}}catch(n){var d,h,p;throw new Error((0,_.default)(d=(0,_.default)(h=(0,_.default)(p="SymbolsStorage: API error when processing exchange ".concat(t," symbol #")).call(p,r," (")).call(h,e.symbol[r],"): ")).call(d,Object(n).message))}}}]),t}();function k(t,e){return void 0!==t?t:e}e.SymbolsStorage=I},739:function(t,e,r){t.exports=r(747)},740:function(t,e,r){var n=r(745);t.exports=n},741:function(t,e,r){var n=r(752);t.exports=n},745:function(t,e,r){r(746);var n=r(19);t.exports=n.Array.isArray},746:function(t,e,r){r(7)({target:"Array",stat:!0},{isArray:r(66)})},747:function(t,e,r){t.exports=r(748)},748:function(t,e,r){var n=r(749);t.exports=n},749:function(t,e,r){var n=r(750);t.exports=n},750:function(t,e,r){var n=r(751);r(78),t.exports=n},751:function(t,e,r){r(109),r(247);var n=r(154);t.exports=n},752:function(t,e,r){r(247),r(753);var n=r(19);t.exports=n.Array.from},753:function(t,e,r){var n=r(7),o=r(754);n({target:"Array",stat:!0,forced:!r(756)((function(t){Array.from(t)}))},{from:o})},754:function(t,e,r){"use strict";var n=r(108),o=r(31),i=r(38),a=r(755),s=r(254),u=r(110),c=r(45),f=r(79),l=r(255),v=r(154),d=Array;t.exports=function(t){var e=i(t),r=u(this),h=arguments.length,p=h>1?arguments[1]:void 0,y=void 0!==p;y&&(p=n(p,h>2?arguments[2]:void 0));var m,g,_,x,b,A,w=v(e),S=0;if(!w||this===d&&s(w))for(m=c(e),g=r?new this(m):d(m);m>S;S++)A=y?p(e[S],S):e[S],f(g,S,A);else for(b=(x=l(e,w)).next,g=r?new this:[];!(_=o(b,x)).done;S++)A=y?a(x,p,[_.value,S],!0):_.value,f(g,S,A);return g.length=S,g}},755:function(t,e,r){var n=r(32),o=r(256);t.exports=function(t,e,r,i){try{return i?e(n(r)[0],r[1]):e(r)}catch(e){o(t,"throw",e)}}},757:function(t,e,r){t.exports=r(740)},789:function(t,e,r){t.exports=r(741)},790:function(t,e,r){t.exports=r(271)},791:function(t,e,r){t.exports=r(792)},792:function(t,e,r){var n=r(793);t.exports=n},793:function(t,e,r){var n=r(30),o=r(794),i=Array.prototype;t.exports=function(t){var e=t.sort;return t===i||n(i,t)&&e===i.sort?o:e}},794:function(t,e,r){r(795);var n=r(36);t.exports=n("Array").sort},795:function(t,e,r){"use strict";var n=r(7),o=r(10),i=r(49),a=r(38),s=r(45),u=r(796),c=r(50),f=r(9),l=r(797),v=r(156),d=r(798),h=r(799),p=r(80),y=r(800),m=[],g=o(m.sort),_=o(m.push),x=f((function(){m.sort(void 0)})),b=f((function(){m.sort(null)})),A=v("sort"),w=!f((function(){if(p)return p<70;if(!(d&&d>3)){if(h)return!0;if(y)return y<603;var t,e,r,n,o="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)m.push({k:e+n,v:r})}for(m.sort((function(t,e){return e.v-t.v})),n=0;n<m.length;n++)e=m[n].k.charAt(0),o.charAt(o.length-1)!==e&&(o+=e);return"DGBEFHACIJK"!==o}}));n({target:"Array",proto:!0,forced:x||!b||!A||!w},{sort:function(t){void 0!==t&&i(t);var e=a(this);if(w)return void 0===t?g(e):g(e,t);var r,n,o=[],f=s(e);for(n=0;n<f;n++)n in e&&_(o,e[n]);for(l(o,function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:c(e)>c(r)?1:-1}}(t)),r=s(o),n=0;n<r;)e[n]=o[n++];for(;n<f;)u(e,n++);return e}})},796:function(t,e,r){"use strict";var n=r(69),o=TypeError;t.exports=function(t,e){if(!delete t[e])throw o("Cannot delete property "+n(e)+" of "+n(t))}},797:function(t,e,r){var n=r(272),o=Math.floor,i=function(t,e){var r=t.length,u=o(r/2);return r<8?a(t,e):s(t,i(n(t,0,u),e),i(n(t,u),e),e)},a=function(t,e){for(var r,n,o=t.length,i=1;i<o;){for(n=i,r=t[i];n&&e(t[n-1],r)>0;)t[n]=t[--n];n!==i++&&(t[n]=r)}return t},s=function(t,e,r,n){for(var o=e.length,i=r.length,a=0,s=0;a<o||s<i;)t[a+s]=a<o&&s<i?n(e[a],r[s])<=0?e[a++]:r[s++]:a<o?e[a++]:r[s++];return t};t.exports=i},798:function(t,e,r){var n=r(153).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},799:function(t,e,r){var n=r(153);t.exports=/MSIE|Trident/.test(n)},800:function(t,e,r){var n=r(153).match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},801:function(t,e,r){t.exports=r(802)},802:function(t,e,r){var n=r(803);t.exports=n},803:function(t,e,r){var n=r(30),o=r(804),i=Array.prototype;t.exports=function(t){var e=t.indexOf;return t===i||n(i,t)&&e===i.indexOf?o:e}},804:function(t,e,r){r(805);var n=r(36);t.exports=n("Array").indexOf},805:function(t,e,r){"use strict";var n=r(7),o=r(159),i=r(160).indexOf,a=r(156),s=o([].indexOf),u=!!s&&1/s([1],1,-0)<0;n({target:"Array",proto:!0,forced:u||!a("indexOf")},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return u?s(this,t,e)||0:i(this,t,e)}})},806:function(t,e,r){t.exports=r(807)},807:function(t,e,r){var n=r(808);t.exports=n},808:function(t,e,r){var n=r(30),o=r(809),i=Array.prototype;t.exports=function(t){var e=t.some;return t===i||n(i,t)&&e===i.some?o:e}},809:function(t,e,r){r(810);var n=r(36);t.exports=n("Array").some},810:function(t,e,r){"use strict";var n=r(7),o=r(51).some;n({target:"Array",proto:!0,forced:!r(156)("some")},{some:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);