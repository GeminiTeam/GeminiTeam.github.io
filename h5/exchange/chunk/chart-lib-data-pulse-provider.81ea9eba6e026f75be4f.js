(window.webpackJsonp=window.webpackJsonp||[]).push([[26,27],{253:function(e,t,r){"use strict";var s=r(14),a=r(20);s(t,"__esModule",{value:!0}),t.getErrorMessage=function(e){if(void 0===e)return"";if("string"==typeof e)return e;return e.message},t.logMessage=function(e){if(i){var t,r,s=new Date;console.log((0,n.default)(t=(0,n.default)(r="".concat(s.toLocaleTimeString(),".")).call(r,s.getMilliseconds(),"> ")).call(t,e))}};var n=a(r(158)),i=!1},274:function(e,t,r){"use strict";var s=r(14),a=r(20);s(t,"__esModule",{value:!0}),t.DataPulseProvider=void 0;var n=a(r(776)),i=a(r(754)),o=a(r(158)),u=a(r(793)),c=a(r(801)),l=a(r(42)),f=a(r(43)),d=r(253),v=function(){function e(t,r){var s;(0,l.default)(this,e),this._subscribers={},this._requestsPending=0,this._historyProvider=t,(0,n.default)((0,i.default)(s=this._updateData).call(s,this),r)}return(0,f.default)(e,[{key:"subscribeBars",value:function(e,t,r,s){var a,n;this._subscribers.hasOwnProperty(s)?(0,d.logMessage)("DataPulseProvider: already has subscriber with id=".concat(s)):(this._subscribers[s]={lastBarTime:null,listener:r,resolution:t,symbolInfo:e},(0,d.logMessage)((0,o.default)(a=(0,o.default)(n="DataPulseProvider: subscribed for #".concat(s," - {")).call(n,e.name,", ")).call(a,t,"}")))}},{key:"unsubscribeBars",value:function(e){delete this._subscribers[e],(0,d.logMessage)("DataPulseProvider: unsubscribed for #".concat(e))}},{key:"_updateData",value:function(){var e=this;if(!(this._requestsPending>0)){this._requestsPending=0;var t=function(t){e._requestsPending+=1,e._updateDataForSubscriber(t).then((function(){var r;e._requestsPending-=1,(0,d.logMessage)((0,o.default)(r="DataPulseProvider: data for #".concat(t," updated successfully, pending=")).call(r,e._requestsPending))})).catch((function(r){var s,a;e._requestsPending-=1,(0,d.logMessage)((0,o.default)(s=(0,o.default)(a="DataPulseProvider: data for #".concat(t," updated with error=")).call(a,(0,d.getErrorMessage)(r),", pending=")).call(s,e._requestsPending))}))};for(var r in this._subscribers)t(r)}}},{key:"_updateDataForSubscriber",value:function(e){var t=this,r=this._subscribers[e],s=(0,u.default)(((0,c.default)()/1e3).toString()),a=s-function(e,t){var r=0;r="D"===e||"1D"===e?t:"M"===e||"1M"===e?31*t:"W"===e||"1W"===e?7*t:t*(0,u.default)(e)/1440;return 24*r*60*60}(r.resolution,10);return this._historyProvider.getBars(r.symbolInfo,r.resolution,{from:a,to:s,countBack:2,firstDataRequest:!1}).then((function(r){t._onSubscriberDataReceived(e,r)}))}},{key:"_onSubscriberDataReceived",value:function(e,t){if(this._subscribers.hasOwnProperty(e)){var r=t.bars;if(0!==r.length){var s=r[r.length-1],a=this._subscribers[e];if(!(null!==a.lastBarTime&&s.time<a.lastBarTime)){if(null!==a.lastBarTime&&s.time>a.lastBarTime){if(r.length<2)throw new Error("Not enough bars in history for proper pulse update. Need at least 2.");var n=r[r.length-2];a.listener(n)}a.lastBarTime=s.time,a.listener(s)}}}else(0,d.logMessage)("DataPulseProvider: Data comes for already unsubscribed subscription #".concat(e))}}]),e}();t.DataPulseProvider=v},754:function(e,t,r){e.exports=r(266)},776:function(e,t,r){e.exports=r(789)},785:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},789:function(e,t,r){r(268);var s=r(19);e.exports=s.setInterval},793:function(e,t,r){e.exports=r(804)},800:function(e,t,r){var s=r(10),a=r(82),n=r(50),i=r(785),o=s("".replace),u=RegExp("^["+i+"]+"),c=RegExp("(^|[^"+i+"])["+i+"]+$"),l=function(e){return function(t){var r=n(a(t));return 1&e&&(r=o(r,u,"")),2&e&&(r=o(r,c,"$1")),r}};e.exports={start:l(1),end:l(2),trim:l(3)}},801:function(e,t,r){e.exports=r(808)},804:function(e,t,r){var s=r(805);e.exports=s},805:function(e,t,r){r(806);var s=r(19);e.exports=s.parseInt},806:function(e,t,r){var s=r(7),a=r(807);s({global:!0,forced:parseInt!=a},{parseInt:a})},807:function(e,t,r){var s=r(24),a=r(9),n=r(10),i=r(50),o=r(800).trim,u=r(785),c=s.parseInt,l=s.Symbol,f=l&&l.iterator,d=/^[+-]?0x/i,v=n(d.exec),b=8!==c(u+"08")||22!==c(u+"0x16")||f&&!a((function(){c(Object(f))}));e.exports=b?function(e,t){var r=o(i(e));return c(r,t>>>0||(v(d,r)?16:10))}:c},808:function(e,t,r){var s=r(809);e.exports=s},809:function(e,t,r){r(810);var s=r(19);e.exports=s.Date.now},810:function(e,t,r){var s=r(7),a=r(10),n=Date,i=a(n.prototype.getTime);s({target:"Date",stat:!0},{now:function(){return i(new n)}})}}]);