(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{276:function(t,r,e){"use strict";var n=e(261),o=e(811),i=e(812),a=e(757),s=e(771),u=e(14),c=e(20);u(r,"__esModule",{value:!0}),r.SymbolsStorage=void 0;var f=c(e(42)),l=c(e(43)),v=c(e(771)),d=c(e(788)),h=c(e(159)),y=c(e(261)),p=c(e(813)),m=c(e(823)),g=c(e(828)),_=c(e(158)),x=e(253);function b(t,r){var e=void 0!==i&&a(t)||t["@@iterator"];if(!e){if(s(t)||(e=function(t,r){var e;if(!t)return;if("string"==typeof t)return A(t,r);var i=n(e=Object.prototype.toString.call(t)).call(e,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return o(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return A(t,r)}(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var u=0,c=function(){};return{s:c,n:function(){return u>=t.length?{done:!0}:{done:!1,value:t[u++]}},e:function(t){throw t},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,l=!0,v=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return l=t.done,t},e:function(t){v=!0,f=t},f:function(){try{l||null==e.return||e.return()}finally{if(v)throw f}}}}function A(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function w(t,r,e,n){var o=t[r];return!(0,v.default)(o)||n&&!(0,v.default)(o[0])?o:o[e]}function S(t,r,e){return t+(void 0!==r?"_%|#|%_"+r:"")+(void 0!==e?"_%|#|%_"+e:"")}var I=function(){function t(r,e,n){(0,f.default)(this,t),this._exchangesList=["NYSE","FOREX","AMEX"],this._symbolsInfo={},this._symbolsList=[],this._datafeedUrl=r,this._datafeedSupportedResolutions=e,this._requester=n,this._readyPromise=this._init(),this._readyPromise.catch((function(t){console.error("SymbolsStorage: Cannot init, error=".concat(t.toString()))}))}return(0,l.default)(t,[{key:"resolveSymbol",value:function(t,r,e){var n=this;return this._readyPromise.then((function(){var o=n._symbolsInfo[S(t,r,e)];return void 0===o?d.default.reject("invalid symbol"):d.default.resolve(o)}))}},{key:"searchSymbols",value:function(t,r,e,n){var o=this;return this._readyPromise.then((function(){var i,a,s=[],u=0===t.length;t=t.toUpperCase();var c,f=b(o._symbolsList);try{var l=function(){var n,i,a=c.value,f=o._symbolsInfo[a];if(void 0===f)return"continue";if(e.length>0&&f.type!==e)return"continue";if(r&&r.length>0&&f.exchange!==r)return"continue";var l=(0,m.default)(n=f.name.toUpperCase()).call(n,t),v=(0,m.default)(i=f.description.toUpperCase()).call(i,t);if((u||l>=0||v>=0)&&!(0,g.default)(s).call(s,(function(t){return t.symbolInfo===f}))){var d=l>=0?l:8e3+v;s.push({symbolInfo:f,weight:d})}};for(f.s();!(c=f.n()).done;)l()}catch(t){f.e(t)}finally{f.f()}var v=(0,h.default)(i=(0,y.default)(a=(0,p.default)(s).call(s,(function(t,r){return t.weight-r.weight}))).call(a,0,n)).call(i,(function(t){var r=t.symbolInfo;return{symbol:r.name,full_name:r.full_name,description:r.description,exchange:r.exchange,params:[],type:r.type,ticker:r.name}}));return d.default.resolve(v)}))}},{key:"_init",value:function(){var t,r=this,e=[],n={},o=b(this._exchangesList);try{for(o.s();!(t=o.n()).done;){var i=t.value;n[i]||(n[i]=!0,e.push(this._requestExchangeData(i)))}}catch(t){o.e(t)}finally{o.f()}return d.default.all(e).then((function(){var t;(0,p.default)(t=r._symbolsList).call(t),(0,x.logMessage)("SymbolsStorage: All exchanges data loaded")}))}},{key:"_requestExchangeData",value:function(t){var r=this;return new d.default((function(e,n){r._requester.sendRequest(r._datafeedUrl,"symbol_info",{group:t}).then((function(o){try{r._onExchangeDataReceived(t,o)}catch(t){return void n(t instanceof Error?t:new Error("SymbolsStorage: Unexpected exception ".concat(t)))}e()})).catch((function(r){var n;(0,x.logMessage)((0,_.default)(n="SymbolsStorage: Request data for exchange '".concat(t,"' failed, reason=")).call(n,(0,x.getErrorMessage)(r))),e()}))}))}},{key:"_onExchangeDataReceived",value:function(t,r){var e=0;try{for(var n=r.symbol.length,o=void 0!==r.ticker;e<n;++e){var i=r.symbol[e],a=w(r,"exchange-listed",e),s=w(r,"exchange-traded",e),u=s+":"+i,c=w(r,"currency-code",e),f=w(r,"unit-id",e),l=o?w(r,"ticker",e):i,v={ticker:l,name:i,base_name:[a+":"+i],full_name:u,listed_exchange:a,exchange:s,currency_code:c,original_currency_code:w(r,"original-currency-code",e),unit_id:f,original_unit_id:w(r,"original-unit-id",e),unit_conversion_types:w(r,"unit-conversion-types",e,!0),description:w(r,"description",e),has_intraday:k(w(r,"has-intraday",e),!1),has_no_volume:k(w(r,"has-no-volume",e),void 0),visible_plots_set:k(w(r,"visible-plots-set",e),void 0),minmov:w(r,"minmovement",e)||w(r,"minmov",e)||0,minmove2:w(r,"minmove2",e)||w(r,"minmov2",e),fractional:w(r,"fractional",e),pricescale:w(r,"pricescale",e),type:w(r,"type",e),session:w(r,"session-regular",e),session_holidays:w(r,"session-holidays",e),corrections:w(r,"corrections",e),timezone:w(r,"timezone",e),supported_resolutions:k(w(r,"supported-resolutions",e,!0),this._datafeedSupportedResolutions),has_daily:k(w(r,"has-daily",e),!0),intraday_multipliers:k(w(r,"intraday-multipliers",e,!0),["1","5","15","30","60"]),has_weekly_and_monthly:w(r,"has-weekly-and-monthly",e),has_empty_bars:w(r,"has-empty-bars",e),volume_precision:k(w(r,"volume-precision",e),0),format:"price"};this._symbolsInfo[l]=v,this._symbolsInfo[i]=v,this._symbolsInfo[u]=v,void 0===c&&void 0===f||(this._symbolsInfo[S(l,c,f)]=v,this._symbolsInfo[S(i,c,f)]=v,this._symbolsInfo[S(u,c,f)]=v),this._symbolsList.push(i)}}catch(n){var d,h,y;throw new Error((0,_.default)(d=(0,_.default)(h=(0,_.default)(y="SymbolsStorage: API error when processing exchange ".concat(t," symbol #")).call(y,e," (")).call(h,r.symbol[e],"): ")).call(d,Object(n).message))}}}]),t}();function k(t,r){return void 0!==t?t:r}r.SymbolsStorage=I},755:function(t,r,e){var n=e(760);t.exports=n},756:function(t,r,e){var n=e(21)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[n]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,r){if(!r&&!o)return!1;var e=!1;try{var i={};i[n]=function(){return{next:function(){return{done:e=!0}}}},t(i)}catch(t){}return e}},757:function(t,r,e){t.exports=e(762)},758:function(t,r,e){var n=e(767);t.exports=n},760:function(t,r,e){e(761);var n=e(19);t.exports=n.Array.isArray},761:function(t,r,e){e(7)({target:"Array",stat:!0},{isArray:e(66)})},762:function(t,r,e){t.exports=e(763)},763:function(t,r,e){var n=e(764);t.exports=n},764:function(t,r,e){var n=e(765);t.exports=n},765:function(t,r,e){var n=e(766);e(78),t.exports=n},766:function(t,r,e){e(109),e(254);var n=e(160);t.exports=n},767:function(t,r,e){e(254),e(768);var n=e(19);t.exports=n.Array.from},768:function(t,r,e){var n=e(7),o=e(769);n({target:"Array",stat:!0,forced:!e(756)((function(t){Array.from(t)}))},{from:o})},769:function(t,r,e){"use strict";var n=e(108),o=e(31),i=e(38),a=e(770),s=e(258),u=e(110),c=e(45),f=e(79),l=e(259),v=e(160),d=Array;t.exports=function(t){var r=i(t),e=u(this),h=arguments.length,y=h>1?arguments[1]:void 0,p=void 0!==y;p&&(y=n(y,h>2?arguments[2]:void 0));var m,g,_,x,b,A,w=v(r),S=0;if(!w||this===d&&s(w))for(m=c(r),g=e?new this(m):d(m);m>S;S++)A=p?y(r[S],S):r[S],f(g,S,A);else for(b=(x=l(r,w)).next,g=e?new this:[];!(_=o(b,x)).done;S++)A=p?a(x,y,[_.value,S],!0):_.value,f(g,S,A);return g.length=S,g}},770:function(t,r,e){var n=e(32),o=e(260);t.exports=function(t,r,e,i){try{return i?r(n(e)[0],e[1]):r(e)}catch(r){o(t,"throw",r)}}},771:function(t,r,e){t.exports=e(755)},811:function(t,r,e){t.exports=e(758)},812:function(t,r,e){t.exports=e(284)},813:function(t,r,e){t.exports=e(814)},814:function(t,r,e){var n=e(815);t.exports=n},815:function(t,r,e){var n=e(30),o=e(816),i=Array.prototype;t.exports=function(t){var r=t.sort;return t===i||n(i,t)&&r===i.sort?o:r}},816:function(t,r,e){e(817);var n=e(36);t.exports=n("Array").sort},817:function(t,r,e){"use strict";var n=e(7),o=e(10),i=e(49),a=e(38),s=e(45),u=e(818),c=e(50),f=e(9),l=e(819),v=e(163),d=e(820),h=e(821),y=e(80),p=e(822),m=[],g=o(m.sort),_=o(m.push),x=f((function(){m.sort(void 0)})),b=f((function(){m.sort(null)})),A=v("sort"),w=!f((function(){if(y)return y<70;if(!(d&&d>3)){if(h)return!0;if(p)return p<603;var t,r,e,n,o="";for(t=65;t<76;t++){switch(r=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:e=3;break;case 68:case 71:e=4;break;default:e=2}for(n=0;n<47;n++)m.push({k:r+n,v:e})}for(m.sort((function(t,r){return r.v-t.v})),n=0;n<m.length;n++)r=m[n].k.charAt(0),o.charAt(o.length-1)!==r&&(o+=r);return"DGBEFHACIJK"!==o}}));n({target:"Array",proto:!0,forced:x||!b||!A||!w},{sort:function(t){void 0!==t&&i(t);var r=a(this);if(w)return void 0===t?g(r):g(r,t);var e,n,o=[],f=s(r);for(n=0;n<f;n++)n in r&&_(o,r[n]);for(l(o,function(t){return function(r,e){return void 0===e?-1:void 0===r?1:void 0!==t?+t(r,e)||0:c(r)>c(e)?1:-1}}(t)),e=s(o),n=0;n<e;)r[n]=o[n++];for(;n<f;)u(r,n++);return r}})},818:function(t,r,e){"use strict";var n=e(69),o=TypeError;t.exports=function(t,r){if(!delete t[r])throw o("Cannot delete property "+n(r)+" of "+n(t))}},819:function(t,r,e){var n=e(285),o=Math.floor,i=function(t,r){var e=t.length,u=o(e/2);return e<8?a(t,r):s(t,i(n(t,0,u),r),i(n(t,u),r),r)},a=function(t,r){for(var e,n,o=t.length,i=1;i<o;){for(n=i,e=t[i];n&&r(t[n-1],e)>0;)t[n]=t[--n];n!==i++&&(t[n]=e)}return t},s=function(t,r,e,n){for(var o=r.length,i=e.length,a=0,s=0;a<o||s<i;)t[a+s]=a<o&&s<i?n(r[a],e[s])<=0?r[a++]:e[s++]:a<o?r[a++]:e[s++];return t};t.exports=i},820:function(t,r,e){var n=e(161).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},821:function(t,r,e){var n=e(161);t.exports=/MSIE|Trident/.test(n)},822:function(t,r,e){var n=e(161).match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},823:function(t,r,e){t.exports=e(824)},824:function(t,r,e){var n=e(825);t.exports=n},825:function(t,r,e){var n=e(30),o=e(826),i=Array.prototype;t.exports=function(t){var r=t.indexOf;return t===i||n(i,t)&&r===i.indexOf?o:r}},826:function(t,r,e){e(827);var n=e(36);t.exports=n("Array").indexOf},827:function(t,r,e){"use strict";var n=e(7),o=e(166),i=e(167).indexOf,a=e(163),s=o([].indexOf),u=!!s&&1/s([1],1,-0)<0;n({target:"Array",proto:!0,forced:u||!a("indexOf")},{indexOf:function(t){var r=arguments.length>1?arguments[1]:void 0;return u?s(this,t,r)||0:i(this,t,r)}})},828:function(t,r,e){t.exports=e(829)},829:function(t,r,e){var n=e(830);t.exports=n},830:function(t,r,e){var n=e(30),o=e(831),i=Array.prototype;t.exports=function(t){var r=t.some;return t===i||n(i,t)&&r===i.some?o:r}},831:function(t,r,e){e(832);var n=e(36);t.exports=n("Array").some},832:function(t,r,e){"use strict";var n=e(7),o=e(51).some;n({target:"Array",proto:!0,forced:!e(163)("some")},{some:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);